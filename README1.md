# NJU2023秋编译原理Lab1

姓名：闻嘉迅  
学号：211220091  
日期：2023.10.13  
### 1.功能实现

- 基础功能，对于c--基本文法的分析和语法树的构建。  
- 错误识别，对于出现的词法和语法错误进行报错（可能有问题）。  
- 对八进制和十六进制数字的识别，并对不符合格式的数字进行报错。  
- 对指数形式的小数进行识别。  
- 识别"//"和"/* */"式的注释并丢弃。  

### 2.编译方法

编译工具版本：  
gcc version 11.4.0     
flex 2.6.4  
bison (GNU Bison) 3.8.2  

进入Code文件夹，在此目录下输入`make parser`命令进行编译，`./parser [filename]` 执行命令。  

### 3.文件结构

lex.l:词法分析器相关代码  
parser.y:语法分析器相关代码  
syntax_tree.h:语法树生成的相关函数声明  
syntax_tree.c:语法树生成的相关函数实现  
main.c:主函数部分  

### 4.具体实现

输入文件在lex.l中的词法分析器识别，每识别到一个合法的`token`就进行相应的宏操作：  
- 如果处于DEBUG模式下，打印调试信息。  
- 根据`token`的信息初始化相应的语法树节点。  
- 根据`token`设定返回值。  

`token`传入语法分析器后进行匹配，如果匹配到一条规则，则执行相应的宏操作：  
- 对于此条规则新建一个节点。  
- 将匹配到的节点一次加入这个节点。
- 将首条规则产生的节点定义为语法树根节点。  
语法树构建完成后，若无错误，则递归打印语法树节点信息。  


实现中的特点如下：  
- 语法树采用了"长子-兄弟"法进行实现，将多叉树降级成二叉树，便于实现。  
- 在lex.l和parser.y中采用大量诸如`COMMON_ACTIONS` `EXP_ACTIONS3`等的宏定义实现，缩短了代码长度并提高了调试和修改效率。  